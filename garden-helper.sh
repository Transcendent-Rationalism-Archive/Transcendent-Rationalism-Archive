#!/bin/bash

echo "üåø –ü–æ–º–æ—â–Ω–∏–∫ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –°–∞–¥–æ–º –°–æ–∑–Ω–∞–Ω–∏–π"

# 1. –ü—É–ª–ª
read -p "1. –í—ã–ø–æ–ª–Ω–∏—Ç—å git pull (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å GitHub)? [y/N]: " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    git pull origin main
fi

# 2. –í—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
echo "2. –í—ã–±–µ—Ä–∏—Ç–µ, –∫–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–º–º–∏—Ç:"
echo "   a) –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (git add .)"
echo "   b) –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª"
echo "   c) –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç —à–∞–≥"
read -p "–í–∞—à –≤—ã–±–æ—Ä [a/b/c]: " choice

case $choice in
    a|A) git add . ;;
    b|B) 
        read -p "–í–≤–µ–¥–∏—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É: " filepath
        git add "$filepath"
        ;;
    *) echo "–ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã." ;;
esac

# 3. –ö–æ–º–º–∏—Ç
read -p "3. –í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞: " commit_msg
if [ -n "$commit_msg" ]; then
    git commit -m "$commit_msg"
else
    echo "–°–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ –ø—É—Å—Ç–æ–µ. –ö–æ–º–º–∏—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω."
    exit 1
fi

# 4. –ü—É—à
read -p "4. –í—ã–ø–æ–ª–Ω–∏—Ç—å git push (–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è)? [y/N]: " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    git push origin main
fi

echo "‚úÖ –†–∞–±–æ—Ç–∞ –ø–æ–º–æ—â–Ω–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞."
